import{aw as e,br as t,bB as s,aS as i,cd as n,F as l,D as o,a7 as a,c as r,o as c,a as h,S as u,b as d,bP as m,M as p,H as f,d as g,t as v,J as x,aF as b,w,a5 as y,ap as C,aG as _,ad as S,aa as M,K as k,E,a6 as j,W as z,G as O,aN as I,qy as A,bK as F,at as T,go as L,_ as R,qz as D,T as W,aJ as H,L as V,a2 as N,bC as P,bF as q,aU as B,aM as U,aT as $,aL as K,qA as Y}from"./Bxw5cw78.js";import{u as G,f as J,g as Z,a as Q}from"./DvmXyesK.js";import{u as X}from"./CCURznEr.js";import{u as ee}from"./BvKJs4zx.js";import{u as te}from"./DlxNBJ9i.js";import"./B9iAJpDZ.js";import"./U7BYpeL2.js";import"./BwBtLxAE.js";import"./B_LEDPcw.js";import"./HIBfAu1m.js";import"./Bj1LhSck.js";import"./Cf4j4Zxy.js";import"./D-bedH53.js";import"./3zf6s2PU.js";import"./BPthxbwx.js";import"./xtHmCIDe.js";import"./E8IcH2uU.js";import"./B7MFdLoT.js";import"./BY848W6k.js";import"./C56o9Dup.js";import"./DafMbvy8.js";import"./BY1dx2mG.js";import"./DqeGGpF0.js";import"./Cbe3Qev8.js";import"./CxC3e6_e.js";import"./CTVtagwo.js";import"./BKIFOg3b.js";import"./zgxk9k1l.js";import"./DPgv5niE.js";import"./Bz6sgznZ.js";import"./8f3bRODF.js";import"./BHC8M4MO.js";import"./BMg19WEF.js";import"./CnTq1_hT.js";import"./Cm_-dUZr.js";import"./A4a5GK3p.js";/* empty css        */import"./Bonkxumq.js";import"./IVbjSxdh.js";import"./DKD6Onic.js";import"./n3z58nq5.js";const se={class:"pb-16px"},ie={class:"flex flex-col gap-8px flex-1 min-w-0"},ne={class:"justify-between items-center flex"},le={class:"min-w-0 flex-1"},oe={class:"min-w-0 flex-1 flex items-center gap-7px"},ae={class:"flex-1 min-w-0"},re={class:"gap-8px flex items-center min-w-0"},ce={key:0,width:12,src:"data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5673_16705)'%3e%3cpath%20d='M11.6338%205.11317L10.7455%204.22488C10.7027%204.18326%2010.6686%204.13351%2010.6452%204.07855C10.6219%204.02358%2010.6097%203.9645%2010.6095%203.90478V2.64037C10.6091%202.3094%2010.4774%201.9921%2010.2434%201.75806C10.0094%201.52403%209.69205%201.39237%209.36108%201.39197H8.09667C8.03695%201.39171%207.97788%201.37955%207.92292%201.35619C7.86796%201.33283%207.8182%201.29874%207.77657%201.25593L6.88829%200.367642C6.65211%200.13317%206.3328%200.00158691%206%200.00158691C5.6672%200.00158691%205.34789%200.13317%205.11171%200.367642L4.22343%201.25593C4.18179%201.29874%204.13204%201.33283%204.07708%201.35619C4.02211%201.37955%203.96305%201.39171%203.90332%201.39197H2.63892C2.30794%201.39237%201.99064%201.52403%201.75661%201.75806C1.52257%201.9921%201.39092%202.3094%201.39052%202.64037V3.90478C1.39028%203.9645%201.37813%204.02358%201.35476%204.07855C1.3314%204.13351%201.29731%204.18326%201.25447%204.22488L0.366186%205.11317C0.131636%205.34931%200%205.66863%200%206.00146C0%206.33428%200.131636%206.6536%200.366186%206.88974L1.25447%207.77803C1.29731%207.81965%201.3314%207.8694%201.35476%207.92436C1.37813%207.97933%201.39028%208.03841%201.39052%208.09813V9.36254C1.39092%209.69351%201.52257%2010.0108%201.75661%2010.2448C1.99064%2010.4789%202.30794%2010.6105%202.63892%2010.6109H3.90332C3.96305%2010.6112%204.02211%2010.6234%204.07708%2010.6467C4.13204%2010.6701%204.18179%2010.7042%204.22343%2010.747L5.11171%2011.6353C5.22833%2011.752%205.36681%2011.8446%205.51923%2011.9077C5.67164%2011.9709%205.83501%2012.0034%206%2012.0034C6.16499%2012.0034%206.32836%2011.9709%206.48077%2011.9077C6.63319%2011.8446%206.77167%2011.752%206.88829%2011.6353L7.77657%2010.747C7.8182%2010.7042%207.86796%2010.6701%207.92292%2010.6467C7.97788%2010.6234%208.03695%2010.6112%208.09667%2010.6109H9.36108C9.69205%2010.6105%2010.0094%2010.4789%2010.2434%2010.2448C10.4774%2010.0108%2010.6091%209.69351%2010.6095%209.36254V8.09813C10.6097%208.03841%2010.6219%207.97933%2010.6452%207.92436C10.6686%207.8694%2010.7027%207.81965%2010.7455%207.77803L11.6338%206.88974C11.8684%206.6536%2012%206.33428%2012%206.00146C12%205.66863%2011.8684%205.34931%2011.6338%205.11317ZM7.88061%205.2172L5.75192%207.35389C5.67489%207.42599%205.57333%207.4661%205.46783%207.4661C5.36232%207.4661%205.26077%207.42599%205.18374%207.35389L4.11939%206.28155C4.04635%206.20701%204.00566%206.10665%204.00619%206.00228C4.00672%205.89792%204.04841%205.79798%204.12221%205.72418C4.19601%205.65038%204.29595%205.60869%204.40031%205.60816C4.50468%205.60764%204.60503%205.64832%204.67957%205.72137L5.46383%206.50562L7.32042%204.64902C7.39533%204.57591%207.49585%204.53499%207.60051%204.53499C7.70518%204.53499%207.8057%204.57591%207.88061%204.64902C7.91861%204.68593%207.94882%204.7301%207.96945%204.77889C7.99008%204.82769%208.00071%204.88013%208.00071%204.93311C8.00071%204.98609%207.99008%205.03853%207.96945%205.08733C7.94882%205.13613%207.91861%205.18029%207.88061%205.2172Z'%20fill='%231C9BEF'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_5673_16705'%3e%3crect%20width='12'%20height='12'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",alt:""},he={class:"color-[--up-color] text-12px"},ue={key:2,class:"color-[--up-color] text-12px"},de={class:"text-12px color-[--secondary-text]"},me={key:0,class:"gap-8px flex items-center"},pe=["innerHTML"],fe=["innerHTML"],ge=["src"],ve=["src","onLoad"],xe={key:0,class:"absolute top-0 left-0 w-full h-full bg-black/50 rounded-8px"},be={__name:"listItem",props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["measureElement"],setup(F,{emit:T}){const L=T,R=X(),{t:D}=e(),W=t(),H=F,V=l({}),N=l(null),P=l(null),q=l(!1),B=l(!1),U=s("twFollowIds",[]),$=E(()=>{var e;return A((null==(e=H.item)?void 0:e.content)||"")}),K=()=>{O(()=>{const e=P.value||N.value;if(!e)return;const t=11*(parseFloat(getComputedStyle(e).lineHeight)||22);B.value=e.scrollHeight>t+1})};i(()=>{K(),window.addEventListener("resize",K)}),n(()=>{window.removeEventListener("resize",K),V.value={}}),o(()=>{var e;return null==(e=H.item)?void 0:e.content},()=>{K()},{immediate:!0});const Y=e=>{window.open(e)},Z=e=>{const t=V.value[e];t&&O(()=>{if(t.updatePopper)t.updatePopper();else if(t.popperInstance)t.popperInstance.update();else if(t.$&&t.$.exposed){const e=t.$.exposed;e.updatePopper&&e.updatePopper()}requestAnimationFrame(()=>{window.dispatchEvent(new Event("resize"))})})},Q=e=>{var t;"A"!==e.target.tagName&&(t=H.item.url,window.open(t))};return(e,t)=>{var s,i;const n=m,l=_,o=M,E=z,A=a("tooltip");return c(),r("div",se,[h("div",ie,[h("div",ne,[h("div",le,[h("div",oe,[d(n,{"icon-size":"32px",class:"cursor-pointer",wallet_logo:{logo:F.item.author.profile_pic,name:F.item.author.name},onClick:t[0]||(t[0]=e=>Y(F.item.author.twitter_url))},null,8,["wallet_logo"]),h("div",ae,[h("div",re,[p((c(),r("span",{class:"color-[--main-text] text-16px lh-20px min-w-0 max-w-[calc(100%-80px)] truncate cursor-pointer",onClick:t[1]||(t[1]=e=>Y(F.item.author.twitter_url))},[g(v(F.item.author.name),1)])),[[A,F.item.author.name]]),F.item.verified?(c(),r("img",ce)):u("",!0),F.item.created_at&&Number(("formatTimeFromNow"in e?e.formatTimeFromNow:x(b))(F.item.created_at,!0))<60?(c(),f(l,{key:`${F.item.created_at}`,timestamp:Math.min(+F.item.created_at,x(C)().unix()-1),"end-time":60},{default:w(({seconds:t})=>[h("span",he,[t<60?(c(),r(y,{key:0},[g(v(t)+"s ",1)],64)):(c(),r(y,{key:1},[g(v(("formatTimeFromNow"in e?e.formatTimeFromNow:x(b))(F.item.created_at)),1)],64))])]),_:1},8,["timestamp"])):p((c(),r("span",ue,[g(v(("formatTimeFromNow"in e?e.formatTimeFromNow:x(b))(F.item.created_at)),1)])),[[A,("formatDate"in e?e.formatDate:x(S))(F.item.created_at,"YYYY-MM-DD HH:mm:ss")]])]),h("div",de,"@"+v(F.item.author.username),1)])])]),-1!==F.index?(c(),r("div",me,[h("div",{class:"w-24px h-24px bg-[--main-list-hover] rounded-4px flex items-center justify-center cursor-pointer",onClick:t[2]||(t[2]=e=>1===F.item.author.follow_status?(async(e,t)=>{try{await G(e),I.success(D("cancelFollowed")),R.list[t].author.follow_status=0,U.value=U.value.filter(t=>t.author_id!==e)}catch(s){I.error(D("failed"))}})(F.item.author.author_id,F.index):(async(e,t)=>{try{if(!W.accessToken)return void W.changeConnectVisible(!0);if(U.value.length>=50)return void I.error(D("twitterMax"));await J(e),I.success(D("followed")),R.list[t].author.follow_status=1,U.value=U.value.concat({author_id:e})}catch(s){I.error(D("failed"))}})(F.item.author.author_id,F.index))},[d(o,{name:1===F.item.author.follow_status?"custom:twitter-collect":"custom:twitter-uncollect",class:"text-12px"},null,8,["name"])]),d(o,{name:`custom:twitter-${F.item.type}`,class:"text-24px"},null,8,["name"])])):u("",!0)]),h("div",{class:k(["relative",-1!==F.index?"ml-40px":""])},[h("div",{ref_key:"contentEl",ref:N,class:k(["text-14px lh-22px break-words",{"line-11":!x(q)&&x(B)}])},[h("div",{class:"cursor-pointer",onClick:Q,innerHTML:x($)},null,8,pe)],2),h("div",{ref_key:"measureEl",ref:P,class:"text-14px lh-22px break-words absolute opacity-0 pointer-events-none",style:{width:"100%",top:"0",left:"0","z-index":"-1"},innerHTML:x($)},null,8,fe)],2),(c(!0),r(y,null,j(null==(i=null==(s=F.item.medias)?void 0:s.slice)?void 0:i.call(s,0,1),(e,s)=>(c(),r("div",{key:s,class:k([-1!==F.index?"ml-40px":"","relative"])},[d(E,{ref_for:!0,ref:e=>{e&&(x(V)[`${s}`]=e)},"popper-class":"tooltip-pd-0","show-arrow":!1,placement:"right",persistent:!1,"popper-options":{modifiers:[{name:"eventListeners",options:{scroll:!0,resize:!0}}]},onShow:e=>(e=>{O(()=>{Z(e)})})(s)},{default:w(()=>[h("img",{src:e.media_url_https||e.url,alt:"",class:"w-full max-h-300px rounded-8px object-cover"},null,8,ge)]),content:w(()=>[h("img",{src:e.media_url_https||e.url,alt:"",class:"max-w-50vw max-h-50vh object-cover rounded-8px",onLoad:e=>(e=>{L("measureElement"),O(()=>{Z(e)})})(s)},null,40,ve)]),_:2},1032,["onShow"]),"video"===e.type?(c(),r("div",xe,[d(o,{name:"custom:play-circle-line",class:"absolute top-50% left-50% transform -translate-x-1/2 -translate-y-1/2 text-48px text-white cursor-pointer",onClick:t[3]||(t[3]=e=>{return t=F.item.url,void window.open(t);var t})})])):u("",!0)],2))),128)),x(B)?(c(),r("div",{key:0,class:k([-1!==F.index?"ml-40px":"","justify-between items-center flex"])},[t[5]||(t[5]=h("div",{class:"flex items-center gap-4px cursor-pointer text-12px color-[--secondary-text]"},null,-1)),h("span",{class:"flex items-center gap-4px cursor-pointer color-[--primary-color] text-12px",onClick:t[4]||(t[4]=e=>q.value=!x(q))},[d(o,{name:"custom:angle-down",class:k(x(q)?"rotate-180":"")},null,8,["class"]),g(" "+v(x(q)?x(D)("Collapse"):x(D)("Expand")),1)])],2)):u("",!0)])])}}};function we(e,t,s){let i,n=s.initialDeps??[],l=!0;function o(){var o,a,r;let c;s.key&&(null==(o=s.debug)?void 0:o.call(s))&&(c=Date.now());const h=e();if(!(h.length!==n.length||h.some((e,t)=>n[t]!==e)))return i;let u;if(n=h,s.key&&(null==(a=s.debug)?void 0:a.call(s))&&(u=Date.now()),i=t(...h),s.key&&(null==(r=s.debug)?void 0:r.call(s))){Math.round(100*(Date.now()-c)),Math.round(100*(Date.now()-u))}return!(null==s?void 0:s.onChange)||l&&s.skipInitialOnChange||s.onChange(i),l=!1,i}return o.updateDeps=e=>{n=e},o}function ye(e,t){if(void 0===e)throw new Error("Unexpected undefined");return e}const Ce=(e,t,s)=>{let i;return function(...n){e.clearTimeout(i),i=e.setTimeout(()=>t.apply(this,n),s)}},_e=e=>{const{offsetWidth:t,offsetHeight:s}=e;return{width:t,height:s}},Se=e=>e,Me=e=>{const t=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let n=t;n<=s;n++)i.push(n);return i},ke=(e,t)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;const n=e=>{const{width:s,height:i}=e;t({width:Math.round(s),height:Math.round(i)})};if(n(_e(s)),!i.ResizeObserver)return()=>{};const l=new i.ResizeObserver(t=>{const i=()=>{const e=t[0];if(null==e?void 0:e.borderBoxSize){const t=e.borderBoxSize[0];if(t)return void n({width:t.inlineSize,height:t.blockSize})}n(_e(s))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()});return l.observe(s,{box:"border-box"}),()=>{l.unobserve(s)}},Ee={passive:!0},je="undefined"==typeof window||"onscrollend"in window,ze=(e,t)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;let n=0;const l=e.options.useScrollendEvent&&je?()=>{}:Ce(i,()=>{t(n,!1)},e.options.isScrollingResetDelay),o=i=>()=>{const{horizontal:o,isRtl:a}=e.options;n=o?s.scrollLeft*(a?-1:1):s.scrollTop,l(),t(n,i)},a=o(!0),r=o(!1);s.addEventListener("scroll",a,Ee);const c=e.options.useScrollendEvent&&je;return c&&s.addEventListener("scrollend",r,Ee),()=>{s.removeEventListener("scroll",a),c&&s.removeEventListener("scrollend",r)}},Oe=(e,t,s)=>{if(null==t?void 0:t.borderBoxSize){const e=t.borderBoxSize[0];if(e){return Math.round(e[s.options.horizontal?"inlineSize":"blockSize"])}}return e[s.options.horizontal?"offsetWidth":"offsetHeight"]},Ie=(e,{adjustments:t=0,behavior:s},i)=>{var n,l;const o=e+t;null==(l=null==(n=i.scrollElement)?void 0:n.scrollTo)||l.call(n,{[i.options.horizontal?"left":"top"]:o,behavior:s})};class Ae{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver(e=>{e.forEach(e=>{const t=()=>{this._measureElement(e.target,e)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()})}):null);return{disconnect:()=>{var s;null==(s=t())||s.disconnect(),e=null},observe:e=>{var s;return null==(s=t())?void 0:s.observe(e,{box:"border-box"})},unobserve:e=>{var s;return null==(s=t())?void 0:s.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([t,s])=>{void 0===s&&delete e[t]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Se,rangeExtractor:Me,onChange:()=>{},measureElement:Oe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var t,s;null==(s=(t=this.options).onChange)||s.call(t,this,e)},this.maybeNotify=we(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t)return void this.maybeNotify();this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(e=this.scrollElement)?void 0:e.window)??null,this.elementsCache.forEach(e=>{this.observer.observe(e)}),this.unsubs.push(this.options.observeElementRect(this,e=>{this.scrollRect=e,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=t,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{const s=new Map,i=new Map;for(let n=t-1;n>=0;n--){const t=e[n];if(s.has(t.lane))continue;const l=i.get(t.lane);if(null==l||t.end>l.end?i.set(t.lane,t):t.end<l.end&&s.set(t.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end)[0]:void 0},this.getMeasurementOptions=we(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(e,t,s,i,n,l)=>(void 0!==this.prevLanes&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:s,getItemKey:i,enabled:n,lanes:l}),{key:!1}),this.getMeasurements=we(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:t,scrollMargin:s,getItemKey:i,enabled:n,lanes:l},o)=>{if(!n)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>e)for(const h of this.laneAssignments.keys())h>=e&&this.laneAssignments.delete(h);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),0!==this.measurementsCache.length||this.lanesSettling||(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(e=>{this.itemSizeCache.set(e.key,e.size)}));const a=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===e&&(this.lanesSettling=!1);const r=this.measurementsCache.slice(0,a),c=new Array(l).fill(void 0);for(let h=0;h<a;h++){const e=r[h];e&&(c[e.lane]=h)}for(let h=a;h<e;h++){const e=i(h),n=this.laneAssignments.get(h);let l,a;if(void 0!==n&&this.options.lanes>1){l=n;const e=c[l],i=void 0!==e?r[e]:void 0;a=i?i.end+this.options.gap:t+s}else{const e=1===this.options.lanes?r[h-1]:this.getFurthestMeasurement(r,h);a=e?e.end+this.options.gap:t+s,l=e?e.lane:h%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(h,l)}const u=o.get(e),d="number"==typeof u?u:this.options.estimateSize(h),m=a+d;r[h]={index:h,start:a,size:d,end:m,key:e,lane:l},c[l]=h}return this.measurementsCache=r,r},{key:!1,debug:()=>this.options.debug}),this.calculateRange=we(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,t,s,i)=>this.range=e.length>0&&t>0?function({measurements:e,outerSize:t,scrollOffset:s,lanes:i}){const n=e.length-1,l=t=>e[t].start;if(e.length<=i)return{startIndex:0,endIndex:n};let o=Fe(0,n,l,s),a=o;if(1===i)for(;a<n&&e[a].end<s+t;)a++;else if(i>1){const l=Array(i).fill(0);for(;a<n&&l.some(e=>e<s+t);){const t=e[a];l[t.lane]=t.end,a++}const r=Array(i).fill(s+t);for(;o>=0&&r.some(e=>e>=s);){const t=e[o];r[t.lane]=t.start,o--}o=Math.max(0,o-o%i),a=Math.min(n,a+(i-1-a%i))}return{startIndex:o,endIndex:a}}({measurements:e,outerSize:t,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=we(()=>{let e=null,t=null;const s=this.calculateRange();return s&&(e=s.startIndex,t=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,t]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]},(e,t,s,i,n)=>null===i||null===n?[]:e({startIndex:i,endIndex:n,overscan:t,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,s=e.getAttribute(t);return s?parseInt(s,10):-1},this._measureElement=(e,t)=>{const s=this.indexFromElement(e),i=this.measurementsCache[s];if(!i)return;const n=i.key,l=this.elementsCache.get(n);l!==e&&(l&&this.observer.unobserve(l),this.observer.observe(e),this.elementsCache.set(n,e)),e.isConnected&&this.resizeItem(s,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{const s=this.measurementsCache[e];if(!s)return;const i=t-(this.itemSizeCache.get(s.key)??s.size);0!==i&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(s,i,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,t)),this.notify(!1))},this.measureElement=e=>{e?this._measureElement(e,void 0):this.elementsCache.forEach((e,t)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(t))})},this.getVirtualItems=we(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,t)=>{const s=[];for(let i=0,n=e.length;i<n;i++){const n=t[e[i]];s.push(n)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();if(0!==t.length)return ye(t[Fe(0,t.length-1,e=>ye(t[e]).start,e)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const e=this.scrollElement.document.documentElement;return this.options.horizontal?e.scrollWidth-this.scrollElement.innerWidth:e.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(e,t,s=0)=>{if(!this.scrollElement)return 0;const i=this.getSize(),n=this.getScrollOffset();"auto"===t&&(t=e>=n+i?"end":"start"),"center"===t?e+=(s-i)/2:"end"===t&&(e-=i);const l=this.getMaxScrollOffset();return Math.max(Math.min(l,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const s=this.measurementsCache[e];if(!s)return;const i=this.getSize(),n=this.getScrollOffset();if("auto"===t)if(s.end>=n+i-this.options.scrollPaddingEnd)t="end";else{if(!(s.start<=n+this.options.scrollPaddingStart))return[n,t];t="start"}if("end"===t&&e===this.options.count-1)return[this.getMaxScrollOffset(),t];const l="end"===t?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,t,s.size),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:t="start",behavior:s}={})=>{"smooth"===s&&this.isDynamicMode(),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:s})},this.scrollToIndex=(e,{align:t="auto",behavior:s}={})=>{"smooth"===s&&this.isDynamicMode(),e=Math.max(0,Math.min(e,this.options.count-1)),this.currentScrollToIndex=e;let i=0;const n=t=>{if(!this.targetWindow)return;const i=this.getOffsetForIndex(e,t);if(!i)return;const[n,o]=i;this._scrollToOffset(n,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const t=()=>{if(this.currentScrollToIndex!==e)return;const t=this.getScrollOffset(),s=this.getOffsetForIndex(e,o);var i,n;s&&(i=s[0],n=t,Math.abs(i-n)<1.01||l(o))};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(t):t()})},l=t=>{this.targetWindow&&this.currentScrollToIndex===e&&(i++,i<10&&this.targetWindow.requestAnimationFrame(()=>n(t)))};n(t)},this.scrollBy=(e,{behavior:t}={})=>{"smooth"===t&&this.isDynamicMode(),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let s;if(0===t.length)s=this.options.paddingStart;else if(1===this.options.lanes)s=(null==(e=t[t.length-1])?void 0:e.end)??0;else{const e=Array(this.options.lanes).fill(null);let i=t.length-1;for(;i>=0&&e.some(e=>null===e);){const s=t[i];null===e[s.lane]&&(e[s.lane]=s.end),i--}s=Math.max(...e.filter(e=>null!==e))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:s})=>{this.options.scrollToFn(e,{behavior:s,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(e)}}const Fe=(e,t,s,i)=>{for(;e<=t;){const n=(e+t)/2|0,l=s(n);if(l<i)e=n+1;else{if(!(l>i))return n;t=n-1}}return e>0?e-1:0};function Te(e){return function(e){const t=new Ae(x(e)),s=T(t),i=t._didMount();return o(()=>x(e).getScrollElement(),e=>{e&&t._willUpdate()},{immediate:!0}),o(()=>x(e),e=>{t.setOptions({...e,onChange:(t,i)=>{var n;F(s),null==(n=e.onChange)||n.call(e,t,i)}}),t._willUpdate(),F(s)},{immediate:!0}),L(i),s}(E(()=>({observeElementRect:ke,observeElementOffset:ze,scrollToFn:Ie,...x(e)})))}const Le={class:"color-[--third-text] text-12px mb-20px mt-4px"},Re={key:1,class:"flex flex-col items-center pt-60px"},De={class:"color-[--third-text] text-12px mb-20px mt-4px"},We={key:2},He={class:"color-[--third-text] text-12px mb-20px mt-4px"},Ve=["data-index"],Ne={key:0,class:"border-1px border-solid border-[--dialog-divider] rounded-8px px-12px pt-16px ml-40px mb-16px"},Pe=R({__name:"list",props:{isMine:{type:Boolean}},emits:["startAttention","endReached"],setup(s,{emit:i}){const n=l(null),{t:o}=e(),a=i,m=s,p=t(),b=X(),C=Te(E(()=>({count:b.list.length,getScrollElement:()=>n.value,estimateSize:()=>200,overscan:5,gap:16}))),_=E(()=>C.value.getVirtualItems()),S=E(()=>C.value.getTotalSize()),k=E(()=>0===b.list.length),z=e=>b.list[e.index]||{};return D(n,()=>{a("endReached")},{distance:100}),(e,t)=>{const s=W,i=H,l=M;return m.isMine&&!x(p).evmAddress?(c(),f(i,{key:0},{default:w(()=>[h("span",Le,v(x(o)("noWalletTip")),1),d(s,{type:"primary",class:"text-12px w-266px h-40px",onClick:t[0]||(t[0]=e=>x(p).changeConnectVisible(!0))},{default:w(()=>[g(v(x(o)("connectBotWallet")),1)]),_:1})]),_:1})):m.isMine&&x(k)?(c(),r("div",Re,[d(l,{name:"custom:twitter-empty",class:"text-61px mb-12px color-[--icon-color]"}),h("span",De,v(x(o)("twitterEmpty")),1),d(s,{type:"primary",class:"text-12px w-266px h-40px",onClick:t[1]||(t[1]=e=>a("startAttention"))},{default:w(()=>[g(v(x(o)("attention")),1)]),_:1})])):!m.isMine&&x(k)?(c(),r("div",We,[d(i,{class:"pt-40px"},{default:w(()=>[h("span",He,v(x(o)("emptyNoData")),1)]),_:1})])):(c(),r("div",{key:3,ref_key:"parentRef",ref:n,class:"overflow-y-auto scrollbar-hide",style:{height:"calc(100% - 120px)"}},[h("div",{style:V({height:`${x(S)}px`,width:"100%",position:"relative"})},[(c(!0),r(y,null,j(x(_),s=>(c(),r("div",{key:String(s.key),style:V({position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${s.start}px)`})},[h("div",{ref_for:!0,ref:e=>x(C).measureElement(e),"data-index":s.index,class:"border-b-1px border-b-solid border-b-[--border]"},[d(be,{item:z(s),index:s.index,onMeasureElement:t[2]||(t[2]=t=>x(C).measureElement(e.el))},null,8,["item","index"]),["2","3","4"].includes(z(s).type)&&(z(s).retweeted_tweet||z(s).quoted_tweet||z(s).replied_tweet)?(c(),r("div",Ne,[d(be,{item:z(s).retweeted_tweet||z(s).quoted_tweet||z(s).replied_tweet,index:-1,onMeasureElement:t[3]||(t[3]=t=>x(C).measureElement(e.el))},null,8,["item"])])):u("",!0)],8,Ve)],4))),128))],4)],512))}}},[["__scopeId","data-v-8a6a8968"]]),qe={class:"flex items-center pb-14px border-b-1px border-b-solid border-b-[--border] mb-12px"},Be={class:"flex justify-between items-center"},Ue={class:"flex items-center gap-12px"},$e={class:"flex justify-between mb-12px items-center"},Ke={class:"flex gap-16px"},Ye=["onClick"],Ge={class:"flex justify-between items-center mb-14px"},Je={class:"flex items-center gap-8px color-[--secondary-text]"},Ze={class:"pt-16px flex items-center"},Qe=["src","volume"],Xe={__name:"trackerPop",props:{scrollHeight:{type:Number,default:0}},emits:["setDrawerVisible"],setup(i,{emit:n}){const a=n,{t:m}=e(),p=X(),b=ee(),C=N(),_=t(),S=l(1),z=l(!1),O=P("twitterAudio"),I=s("twFollowIds",[]),A=l({...p.query}),F=1,T=2,L=E(()=>I.value.map(e=>e.author_id)),R=E(()=>[{label:m("hot2"),value:F},{label:m("mine"),value:T}]),D=E(()=>[{label:m("tweet"),value:1},{label:m("retweet"),value:3},{label:m("quote"),value:2},{label:m("reply"),value:4}]),H=E(()=>S.value===T),V=l(A.value.types.length===D.value.length),G=l(!1),J=()=>{A.value.types=V.value?D.value.map(e=>e.value):[],G.value=A.value.types.length>0&&A.value.types.length<D.value.length},se=e=>{const t=e.length;V.value=t===D.value.length,G.value=t>0&&t<D.value.length},ie=()=>{A.value.page_token="",p.finished=!1,p.list=[]},ne=async()=>{const e=await Q();I.value=e.authors||[]};o(()=>_.accessToken,e=>{e&&H.value&&(ie(),oe()),e&&ne()}),_.accessToken&&ne();const le=()=>{z.value=!1,ie(),p.query={...p.query,...A.value},oe()},oe=async()=>{const e=S.value;if(!H.value||_.accessToken){p.loading=!0;try{const t=await Z({...A.value,follow_only:H.value,types:A.value.types.join(",")});if(t&&S.value===e){A.value.page_token=t.page_token||"";const e=t.list||[];p.finished=!t.page_token,A.value.page_token||p.finished?p.list=[...p.list,...e]:p.list=e}}catch(t){}finally{p.loading=!1}}};var ae;oe(),ae="subscribe",b.send({jsonrpc:"2.0",method:ae,params:["public_twitter","hot"],id:1});return o(()=>b.wsResult[q.PUBLIC_TWITTER],async e=>{if(A.value.types.includes(+e.type)){if(H.value&&!L.value.includes(e.author_id))return;e.follow_status=L.value.includes(e.author_id)?1:0,p.list.unshift(e),p.list.length>100&&p.list.pop(),O.value&&C.audioSettings.audio.twitter&&O.value.play()}}),o(()=>L.value,()=>{H.value&&(p.list=p.list.filter(e=>L.value.includes(e.author.author_id)))}),te(()=>{p.list=[],A.value.page_token="",oe()}),(e,t)=>{const s=M,i=B,n=$,l=W,o=K;return c(),r("div",{class:k(["w-full h-full bg-[--secondary-bg] p-12px",{"pr-16px":x(p).isLeftFixed,"pl-16px":x(p).isRightFixed}])},[d(s,{name:"custom:drag2",class:"absolute top-4px left-50% ml--6px text-6px bg-[--dialog-list-hover] drag-handle"}),h("div",qe,[h("div",Be,v(x(m)("twitterTracker")),1),t[8]||(t[8]=h("div",{class:"flex-1 drag-handle h-20px"},null,-1)),h("div",Ue,[x(_).evmAddress?(c(),f(s,{key:0,name:"custom:pump-setting",class:"color-[--secondary-text] hover:color-[--main-text] cursor-pointer text-14px",onClick:t[0]||(t[0]=e=>a("setDrawerVisible",!0))})):u("",!0),d(s,{name:"custom:close",class:"text-14px shrink-0 cursor-pointer color-[--main-text]",onClick:t[1]||(t[1]=e=>x(p).visible=!1)})])]),h("div",$e,[h("div",Ke,[(c(!0),r(y,null,j(x(R),e=>(c(),r("span",{key:e.value,class:k(["text-14px cursor-pointer",x(S)===e.value?"color-[--main-text]":"color-[--secondary-text]"]),onClick:t=>{return s=e.value,S.value=s,ie(),void oe();var s}},v(e.label),11,Ye))),128))])]),h("div",Ge,[h("div",Je,[d(o,{visible:x(z),"onUpdate:visible":t[5]||(t[5]=e=>U(z)?z.value=e:null),placement:"bottom-end",trigger:"click",width:164},{reference:w(()=>[d(s,{name:"custom:filter",class:"text-12px cursor-pointer"})]),default:w(()=>[d(i,{modelValue:x(V),"onUpdate:modelValue":t[2]||(t[2]=e=>U(V)?V.value=e:null),indeterminate:x(G),class:"[--el-checkbox-height:16px] mb-12px",onChange:J},{default:w(()=>[g(v(x(m)("all")),1)]),_:1},8,["modelValue","indeterminate"]),d(n,{modelValue:x(A).types,"onUpdate:modelValue":t[3]||(t[3]=e=>x(A).types=e),class:"flex flex-col [--el-checkbox-height:16px] gap-12px",onChange:se},{default:w(()=>[(c(!0),r(y,null,j(x(D),e=>(c(),f(i,{key:e.value,value:e.value},{default:w(()=>[g(v(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),h("div",Ze,[d(l,{class:"min-w-0",onClick:t[4]||(t[4]=e=>z.value=!1)},{default:w(()=>[g(v(x(m)("cancel")),1)]),_:1}),d(l,{class:"min-w-0",type:"primary",onClick:le},{default:w(()=>[g(v(x(m)("confirm")),1)]),_:1})])]),_:1},8,["visible"]),d(s,{name:x(C).audioSettings.audio.twitter?"custom:ad":"custom:admute",class:"mr-4px cursor-pointer",onClick:t[6]||(t[6]=e=>x(C).audioSettings.active="audio")},null,8,["name"])])]),d(Pe,{isMine:x(H),onEndReached:oe,onStartAttention:t[7]||(t[7]=e=>a("setDrawerVisible",!0))},null,8,["isMine"]),h("audio",{ref_key:"twitterAudio",ref:O,controls:"",style:{display:"none"},src:("getAudioUrl"in e?e.getAudioUrl:x(Y))(x(C).audioSettings.audio.twitter),volume:+x(C).audioSettings.audio.volume/100||.5},null,8,Qe)],2)}}};export{Xe as default};
